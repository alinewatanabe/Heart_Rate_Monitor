# Heart Rate Monitor with Displays

## MauÃ¡ Project  

**Authors:**  
Aline Nunes WatanabeÂ¹, Rafaela Oliveira de Andrade MarÂ²  
Â¹ Instituto MauÃ¡ de Tecnologia (IMT)  
Â² Instituto MauÃ¡ de Tecnologia (IMT)  

## Abstract  
This project aimed to develop a heart rate monitor using the **PIC16F628A** microcontroller and a **piezoelectric sensor**. Knowledge acquired in **microcontrollers and instrumentation** was applied in the creation of the device.  

The initial piezoelectric sensor was replaced with a larger one to improve readings. Signal amplification was required, initially using an **LM358 operational amplifier**, which was later replaced by an **LM339 voltage comparator** for greater stability.  

The final circuit included **three seven-segment displays** to show the heart rate. Tests on a breadboard and simulations in Proteus produced satisfactory results, although the need to calibrate the potentiometer and keep the measurement area still was a drawback.  

Despite this limitation, the project demonstrated the practical application of studied concepts and suggested future improvements, such as **motion compensation and the use of additional sensors** to enhance system robustness.  

---

## Introduction  
The **Microcontrollers and Controlled Systems** and **Instrumentation** courses provided the theoretical foundation for this project. The objective was to develop a **heart rate monitor** using the **PIC16F628A**, processing signals from a piezoelectric sensor and displaying the measured values on **seven-segment displays**.  

## Materials and Methods  

### Sensor Selection and Analysis  
Initially, a **0.002m piezoelectric sensor** was tested but presented soldering difficulties and generated a noisy signal. It was replaced by a **0.003m piezoelectric sensor**, which improved readings and reduced noise.  

### Signal Amplification  
The sensor-generated signal was weak, requiring amplification. The circuit went through two versions:  
1. **LM358 amplifier** â€“ showed instability issues.  
2. **LM339 comparator** â€“ provided a more reliable digital output for detecting heartbeats.  

The comparator **detects voltage variations generated by the sensor** and converts this information into digital pulses, which are processed by the **PIC16F628A**.  

### Data Display  
Heartbeats per minute are displayed on **three seven-segment displays**, using **BCD decoders**.  

## Testing and Simulations  

### Simulation in Proteus  
The circuit was first tested in **Proteus**, confirming that amplification and digitization worked as expected.  

### Breadboard Testing  
During physical tests, it was observed that:  
- The **LM358** was unsuitable due to signal instability.  
- The **LM339** solved the issue, providing a more precise digital output.  
- Frequency measurement required manual calibration of the **potentiometer**.  

## Project Code  
The code was developed to:  
1. Activate the **Timer0 interrupt** of the PIC16F628A to count time.  
2. Count level transitions from the LM339 comparator.  
3. Display the **heart rate** on the seven-segment displays.  

## Printed Circuit Board (PCB) Design  
Based on the tested circuit, a **printed circuit board (PCB)** was designed to organize components and improve system reliability.  

## Results and Discussion  
The system performed as expected but presented a usability issue: the need to **keep the sensor still** for accurate measurements. Future improvements may include:  
- **Motion compensation algorithms**.  
- The use of **additional sensors** for greater accuracy.  

## Conclusion  
The project demonstrated the use of the **PIC16F628A and piezoelectric sensor** for heart rate monitoring, applying knowledge of **instrumentation and microcontrollers**. Despite the limitation regarding measurement stability, the system proved the feasibility of the technology and suggested paths for future enhancements.  

## References  
1. **BRAGA, Newton.** Voltage Comparator with LM339 (NE191). Available at: [Newton Braga](https://www.newtoncbraga.com.br/banco-de-circuitos/2655-ne191.html).  
2. **CEPEDA, Eduardo et al.** Heart Rate Detection using a Piezoelectric Ceramic Sensor. *Revista Bionatura, 2022*. Available at: [Article](https://acrobat.adobe.com/link/review?uri=urn%3Aaaid%3Ascds%3AUS%3A8a11b6e6-869d-3460-b9a6-d9fcfd5503fd).  
3. **WATANABE, Aline.** Project videos:  
   - [Simulation in Proteus](https://www.youtube.com/watch?v=pMG_TDfExLI)  
   - [Breadboard tests](https://www.youtube.com/shorts/GSwDxtFUEWs)  
   - [Final soldered circuit](https://youtu.be/IlRUklzx5iE)  

---  

ðŸ“Œ **Project developed by Aline Nunes Watanabe and Rafaela Oliveira de Andrade Mar at Instituto MauÃ¡ de Tecnologia.**  
